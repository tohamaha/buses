<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Artimiausi autobusai</title>
  <style>
    :root{--bg:#0b1020;--card:#111836;--text:#eef2ff;--muted:#a7b0d8;--accent:#7aa2ff;--ok:#1dbf73;--bad:#ff5a7a}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:560px;margin:0 auto;padding:24px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{font-size:22px;margin:0 0 6px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    select,button{font:inherit;background:var(--card);color:var(--text);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:8px 10px}
    button{background:var(--accent);color:#08122a;border:none;font-weight:700;cursor:pointer}
    .tile{margin-top:12px;background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    .t{display:flex;justify-content:space-between;align-items:baseline}
    .big{font-size:36px;font-weight:800}
    .tag{display:inline-block;font-weight:800;border-radius:999px;padding:2px 10px;background:rgba(122,162,255,.18);color:var(--accent);margin-left:8px}
    .ok{color:var(--ok)}.bad{color:var(--bad)}
    .foot{margin-top:12px;font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Artimiausi autobusai</h1>
      <div class="row" style="margin-bottom:8px">
        <span id="now" class="muted"></span>
        <span style="margin-left:auto" class="muted">Diena: </span>
        <select id="service">
          <option value="weekday">Darbo diena</option>
          <option value="weekend">Savaitgalis / šventinė</option>
        </select>
        <button id="refresh">Atnaujinti</button>
      </div>

      <div class="tile">
        <div class="t"><div class="muted">Artimiausias</div><div id="time1" class="muted">—:—</div></div>
        <div class="big" id="left1">—</div>
        <div class="muted">Autobusas <span class="tag" id="bus1">—</span></div>
      </div>

      <div class="tile">
        <div class="t"><div class="muted">Kitas</div><div id="time2" class="muted">—:—</div></div>
        <div class="big" id="left2">—</div>
        <div class="muted">Autobusas <span class="tag" id="bus2">—</span></div>
      </div>

      <div class="foot">Kiškių st. • maršrutai 17 ir 39 • „Europe/Vilnius“</div>
    </div>
  </div>

<script>
// --- Duomenys (iš jūsų nuotraukų) --------------------------------------------
const DATA = {
  timezone: "Europe/Vilnius",
  routes: {
    39: {
      weekday: ["05:47","06:21","06:49","07:31","07:59","08:41","09:09","09:53","10:49","11:31","12:00","12:30","13:02","13:33","14:05","14:36","15:08","15:39","16:10","16:41","17:17","17:53","18:30","19:02","20:06","20:38","21:06","21:39","22:07","22:40","23:09","23:41","00:11"],
      weekend: ["06:49","08:00","09:09","10:14","10:46","11:22","11:55","12:31","13:07","14:10","14:30","15:16","15:49","16:23","16:58","17:33","18:09","18:44","19:17","20:53","21:53","22:53","23:53"]
    },
    17: {
      weekday: ["05:24","05:58","06:27","06:59","07:35","08:11","08:41","09:27","10:21","11:05","11:39","12:10","12:45","13:15","13:50","14:20","14:55","15:25","15:55","16:29","16:59","17:30","18:05","18:35","19:41","20:15","20:44","21:14","21:44","22:13","22:43","23:13","23:43","00:12"],
      weekend: ["06:12","07:16","08:15","09:14","10:16","10:50","11:20","11:54","12:24","13:00","13:28","14:05","15:05","15:25","16:05","16:29","17:04","17:29","18:04","18:30","19:03","20:05","21:03","22:03","23:03","00:03"]
    }
  }
};

// --- Pagalbinės --------------------------------------------------------------
const pad = n=>String(n).padStart(2,'0');
function toMin(hm){ const [h,m]=hm.split(":").map(Number); return h*60+m; }
function fromMin(min){ const h=Math.floor(min/60)%24, m=min%60; return `${pad(h)}:${pad(m)}`; }
function nowMin(){ const d=new Date(); return d.getHours()*60 + d.getMinutes(); }
function isWeekend(d){ const x=d.getDay(); return x===0||x===6; }

// --- Paimti 2 artimiausius iš sujungto sąrašo -------------------------------
function nextTwo(service){
  const cur = nowMin();
  // surenkame visų maršrutų laikus su etikete
  const all = [];
  for(const route of Object.keys(DATA.routes)){
    const arr = DATA.routes[route][service];
    arr.forEach(hm=> all.push({min: toMin(hm), route, hm}));
  }
  // šiandien dar likę
  let upcoming = all.filter(x=>x.min>=cur).sort((a,b)=>a.min-b.min);
  // jei šiandien nebepavyksta surasti 2, pridedame rytojaus pirmuosius
  if(upcoming.length<2){
    const nextDay = all.map(x=>({min:x.min+24*60, route:x.route, hm:x.hm})).sort((a,b)=>a.min-b.min);
    upcoming = upcoming.concat(nextDay);
  }
  return upcoming.slice(0,2);
}

// --- Vaizdavimas -------------------------------------------------------------
const els={
  service: document.getElementById('service'),
  refresh: document.getElementById('refresh'),
  now: document.getElementById('now'),
  time1: document.getElementById('time1'), left1: document.getElementById('left1'), bus1: document.getElementById('bus1'),
  time2: document.getElementById('time2'), left2: document.getElementById('left2'), bus2: document.getElementById('bus2'),
};

function render(){
  const fmt = new Intl.DateTimeFormat('lt-LT',{dateStyle:'medium', timeStyle:'short', timeZone:DATA.timezone});
  els.now.textContent = fmt.format(new Date());

  const svc = els.service.value; // 'weekday' | 'weekend'
  const [n1,n2] = nextTwo(svc);
  const cur = nowMin();

  function set(n, timeEl, leftEl, busEl){
    if(!n){ timeEl.textContent='—:—'; leftEl.textContent='—'; busEl.textContent='—'; return; }
    const diff = (n.min - cur + 24*60) % (24*60);
    const h = Math.floor(diff/60), m = diff%60;
    leftEl.textContent = `${h?h+" val. ":""}${pad(m)} min`;
    leftEl.className = 'big ' + (diff<=5?'bad':'ok');
    timeEl.textContent = n.hm;
    busEl.textContent = n.route;
  }

  set(n1, els.time1, els.left1, els.bus1);
  set(n2, els.time2, els.left2, els.bus2);
}

function init(){
  els.service.value = isWeekend(new Date()) ? 'weekend' : 'weekday';
  els.refresh.onclick = render;
  els.service.onchange = render;
  render();
  setInterval(render, 30*1000);
}

init();
</script>
</body>
</html><!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Artimiausi autobusai</title>
  <style>
    :root{--bg:#0b1020;--card:#111836;--text:#eef2ff;--muted:#a7b0d8;--accent:#7aa2ff;--ok:#1dbf73;--bad:#ff5a7a}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:560px;margin:0 auto;padding:24px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{font-size:22px;margin:0 0 6px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    select,button{font:inherit;background:var(--card);color:var(--text);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:8px 10px}
    button{background:var(--accent);color:#08122a;border:none;font-weight:700;cursor:pointer}
    .tile{margin-top:12px;background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    .t{display:flex;justify-content:space-between;align-items:baseline}
    .big{font-size:36px;font-weight:800}
    .tag{display:inline-block;font-weight:800;border-radius:999px;padding:2px 10px;background:rgba(122,162,255,.18);color:var(--accent);margin-left:8px}
    .ok{color:var(--ok)}.bad{color:var(--bad)}
    .foot{margin-top:12px;font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Artimiausi autobusai</h1>
      <div class="row" style="margin-bottom:8px">
        <span id="now" class="muted"></span>
        <span style="margin-left:auto" class="muted">Diena: </span>
        <select id="service">
          <option value="weekday">Darbo diena</option>
          <option value="weekend">Savaitgalis / šventinė</option>
        </select>
        <button id="refresh">Atnaujinti</button>
      </div>

      <div class="tile">
        <div class="t"><div class="muted">Artimiausias</div><div id="time1" class="muted">—:—</div></div>
        <div class="big" id="left1">—</div>
        <div class="muted">Autobusas <span class="tag" id="bus1">—</span></div>
      </div>

      <div class="tile">
        <div class="t"><div class="muted">Kitas</div><div id="time2" class="muted">—:—</div></div>
        <div class="big" id="left2">—</div>
        <div class="muted">Autobusas <span class="tag" id="bus2">—</span></div>
      </div>

      <div class="foot">Kiškių st. • maršrutai 17 ir 39 • „Europe/Vilnius“</div>
    </div>
  </div>

<script>
// --- Duomenys (iš jūsų nuotraukų) --------------------------------------------
const DATA = {
  timezone: "Europe/Vilnius",
  routes: {
    39: {
      weekday: ["05:47","06:21","06:49","07:31","07:59","08:41","09:09","09:53","10:49","11:31","12:00","12:30","13:02","13:33","14:05","14:36","15:08","15:39","16:10","16:41","17:17","17:53","18:30","19:02","20:06","20:38","21:06","21:39","22:07","22:40","23:09","23:41","00:11"],
      weekend: ["06:49","08:00","09:09","10:14","10:46","11:22","11:55","12:31","13:07","14:10","14:30","15:16","15:49","16:23","16:58","17:33","18:09","18:44","19:17","20:53","21:53","22:53","23:53"]
    },
    17: {
      weekday: ["05:24","05:58","06:27","06:59","07:35","08:11","08:41","09:27","10:21","11:05","11:39","12:10","12:45","13:15","13:50","14:20","14:55","15:25","15:55","16:29","16:59","17:30","18:05","18:35","19:41","20:15","20:44","21:14","21:44","22:13","22:43","23:13","23:43","00:12"],
      weekend: ["06:12","07:16","08:15","09:14","10:16","10:50","11:20","11:54","12:24","13:00","13:28","14:05","15:05","15:25","16:05","16:29","17:04","17:29","18:04","18:30","19:03","20:05","21:03","22:03","23:03","00:03"]
    }
  }
};

// --- Pagalbinės --------------------------------------------------------------
const pad = n=>String(n).padStart(2,'0');
function toMin(hm){ const [h,m]=hm.split(":").map(Number); return h*60+m; }
function fromMin(min){ const h=Math.floor(min/60)%24, m=min%60; return `${pad(h)}:${pad(m)}`; }
function nowMin(){ const d=new Date(); return d.getHours()*60 + d.getMinutes(); }
function isWeekend(d){ const x=d.getDay(); return x===0||x===6; }

// --- Paimti 2 artimiausius iš sujungto sąrašo -------------------------------
function nextTwo(service){
  const cur = nowMin();
  // surenkame visų maršrutų laikus su etikete
  const all = [];
  for(const route of Object.keys(DATA.routes)){
    const arr = DATA.routes[route][service];
    arr.forEach(hm=> all.push({min: toMin(hm), route, hm}));
  }
  // šiandien dar likę
  let upcoming = all.filter(x=>x.min>=cur).sort((a,b)=>a.min-b.min);
  // jei šiandien nebepavyksta surasti 2, pridedame rytojaus pirmuosius
  if(upcoming.length<2){
    const nextDay = all.map(x=>({min:x.min+24*60, route:x.route, hm:x.hm})).sort((a,b)=>a.min-b.min);
    upcoming = upcoming.concat(nextDay);
  }
  return upcoming.slice(0,2);
}

// --- Vaizdavimas -------------------------------------------------------------
const els={
  service: document.getElementById('service'),
  refresh: document.getElementById('refresh'),
  now: document.getElementById('now'),
  time1: document.getElementById('time1'), left1: document.getElementById('left1'), bus1: document.getElementById('bus1'),
  time2: document.getElementById('time2'), left2: document.getElementById('left2'), bus2: document.getElementById('bus2'),
};

function render(){
  const fmt = new Intl.DateTimeFormat('lt-LT',{dateStyle:'medium', timeStyle:'short', timeZone:DATA.timezone});
  els.now.textContent = fmt.format(new Date());

  const svc = els.service.value; // 'weekday' | 'weekend'
  const [n1,n2] = nextTwo(svc);
  const cur = nowMin();

  function set(n, timeEl, leftEl, busEl){
    if(!n){ timeEl.textContent='—:—'; leftEl.textContent='—'; busEl.textContent='—'; return; }
    const diff = (n.min - cur + 24*60) % (24*60);
    const h = Math.floor(diff/60), m = diff%60;
    leftEl.textContent = `${h?h+" val. ":""}${pad(m)} min`;
    leftEl.className = 'big ' + (diff<=5?'bad':'ok');
    timeEl.textContent = n.hm;
    busEl.textContent = n.route;
  }

  set(n1, els.time1, els.left1, els.bus1);
  set(n2, els.time2, els.left2, els.bus2);
}

function init(){
  els.service.value = isWeekend(new Date()) ? 'weekend' : 'weekday';
  els.refresh.onclick = render;
  els.service.onchange = render;
  render();
  setInterval(render, 30*1000);
}

init();
</script>
</body>
</html>