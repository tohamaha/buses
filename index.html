<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Artimiausi autobusai</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* --- Šviesi, minimalistinė tema --- */
    :root{
      --bg:#F9F9F9;       /* fonas */
      --card:#FFFFFF;     /* kortelės fonas */
      --text:#212121;     /* pagrindinis tekstas */
      --muted:#757575;    /* antrinis tekstas */
      --accent:#007AFF;   /* akcentas / mygtukai */
      --shadow:0 10px 30px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:"Roboto","SF Pro Text","Helvetica Neue",Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.45}
    .wrap{max-width:640px;margin:0 auto;padding:20px}
    .card{background:var(--card);border:1px solid #eee;border-radius:18px;box-shadow:var(--shadow);padding:20px}

    h1{font-size:24px;font-weight:700;margin:0 0 10px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .muted{color:var(--muted)}

    select,button{font:inherit;border-radius:12px;border:1px solid #e5e5e5;padding:10px 12px;background:#fff;color:var(--text)}
    select{min-width:180px}
    button{background:var(--accent);border-color:var(--accent);color:#fff;font-weight:700}

    .section{margin-top:16px;border:1px solid #eee;border-radius:16px;padding:16px}
    .topline{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .label{font-weight:500;color:var(--muted)}
    .big{font-size:56px;font-weight:700;letter-spacing:.5px;margin:0}
    .arr{font-size:18px;color:var(--muted)}
    .badge{display:inline-block;font-size:16px;font-weight:700;border-radius:999px;padding:4px 12px;background:#EEF4FF;color:var(--accent)}

    .footer{margin-top:12px;color:var(--muted);font-size:14px}

    /* sklandus atsinaujinimas */
    .fade{opacity:0;transition:opacity .3s ease}
    .fade.show{opacity:1}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <h1>Artimiausi autobusai</h1>
        <div class="row">
          <span class="muted">Diena:</span>
          <select id="service">
            <option value="weekday">Darbo diena</option>
            <option value="weekend">Savaitgalis / šventinė</option>
          </select>
          <button id="refresh">Atnaujinti</button>
        </div>
      </div>
      <div class="muted" id="now"></div>

      <div class="section">
        <div class="topline">
          <span class="label">Artimiausias</span>
          <span class="arr" id="time1">—:—</span>
        </div>
        <p id="left1" class="big fade">—</p>
        <div class="row">
          <span class="muted">Autobusas</span>
          <span id="bus1" class="badge">—</span>
        </div>
      </div>

      <div class="section">
        <div class="topline">
          <span class="label">Kitas</span>
          <span class="arr" id="time2">—:—</span>
        </div>
        <p id="left2" class="big fade">—</p>
        <div class="row">
          <span class="muted">Autobusas</span>
          <span id="bus2" class="badge">—</span>
        </div>
      </div>

      <div class="footer">Kiškių st. • maršrutai 17 ir 39 • Europe/Vilnius</div>
    </div>
  </div>

<script>
// --- Duomenys ---------------------------------------------------------------
const DATA = {
  timezone: "Europe/Vilnius",
  routes: {
    39: {
      weekday: ["05:47","06:21","06:49","07:31","07:59","08:41","09:09","09:53","10:49","11:31","12:00","12:30","13:02","13:33","14:05","14:36","15:08","15:39","16:10","16:41","17:17","17:53","18:30","19:02","20:06","20:38","21:06","21:39","22:07","22:40","23:09","23:41","00:11"],
      weekend: ["06:49","08:00","09:09","10:14","10:46","11:22","11:55","12:31","13:07","14:10","14:30","15:16","15:49","16:23","16:58","17:33","18:09","18:44","19:17","20:53","21:53","22:53","23:53"]
    },
    17: {
      weekday: ["05:24","05:58","06:27","06:59","07:35","08:11","08:41","09:27","10:21","11:05","11:39","12:10","12:45","13:15","13:50","14:20","14:55","15:25","15:55","16:29","16:59","17:30","18:05","18:35","19:41","20:15","20:44","21:14","21:44","22:13","22:43","23:13","23:43","00:12"],
      weekend: ["06:12","07:16","08:15","09:14","10:16","10:50","11:20","11:54","12:24","13:00","13:28","14:05","15:05","15:25","16:05","16:29","17:04","17:29","18:04","18:30","19:03","20:05","21:03","22:03","23:03","00:03"]
    }
  }
};

// --- Pagalbinės -------------------------------------------------------------
const pad=n=>String(n).padStart(2,'0');
const toMin=hm=>{const [h,m]=hm.split(':').map(Number);return h*60+m};
const fromMin=min=>`${pad(Math.floor(min/60)%24)}:${pad(min%60)}`;
const nowMin=()=>{const d=new Date();return d.getHours()*60+d.getMinutes()};
const isWeekend=d=>{const x=d.getDay();return x===6||x===0};

function nextTwo(service){
  const cur = nowMin();
  const all=[];
  for(const r of Object.keys(DATA.routes)){
    DATA.routes[r][service].forEach(hm=>all.push({min:toMin(hm),hm,route:r}));
  }
  let up=all.filter(x=>x.min>=cur).sort((a,b)=>a.min-b.min);
  if(up.length<2){
    const next=all.map(x=>({min:x.min+24*60,hm:x.hm,route:x.route})).sort((a,b)=>a.min-b.min);
    up = up.concat(next);
  }
  return up.slice(0,2);
}

// --- UI ---------------------------------------------------------------------
const els={
  service:document.getElementById('service'),
  refresh:document.getElementById('refresh'),
  now:document.getElementById('now'),
  time1:document.getElementById('time1'),left1:document.getElementById('left1'),bus1:document.getElementById('bus1'),
  time2:document.getElementById('time2'),left2:document.getElementById('left2'),bus2:document.getElementById('bus2'),
};

function fadeSwap(el, text){
  el.classList.remove('show');
  el.textContent = text;
  requestAnimationFrame(()=>requestAnimationFrame(()=>el.classList.add('show')));
}

function render(){
  const fmt = new Intl.DateTimeFormat('lt-LT',{dateStyle:'medium', timeStyle:'short', timeZone:DATA.timezone});
  els.now.textContent = fmt.format(new Date());

  const svc = els.service.value;
  const [a,b]=nextTwo(svc);
  const cur = nowMin();

  function set(n, timeEl, leftEl, busEl){
    if(!n){ timeEl.textContent='—:—'; fadeSwap(leftEl,'—'); busEl.textContent='—'; return; }
    const diff = (n.min - cur + 24*60)% (24*60);
    const h=Math.floor(diff/60), m=diff%60;
    timeEl.textContent = n.hm;
    fadeSwap(leftEl, `${h?h+' val. ':''}${pad(m)} min`);
    busEl.textContent = n.route;
  }

  set(a, els.time1, els.left1, els.bus1);
  set(b, els.time2, els.left2, els.bus2);
}

function init(){
  els.service.value = isWeekend(new Date()) ? 'weekend' : 'weekday';
  els.refresh.onclick = render;
  els.service.onchange = render;
  document.querySelectorAll('.fade').forEach(el=>el.classList.add('show'));
  render();
  setInterval(render, 30*1000);
}
init();
</script>
</body>
</html><!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Artimiausi autobusai</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* --- Šviesi, minimalistinė tema --- */
    :root{
      --bg:#F9F9F9;       /* fonas */
      --card:#FFFFFF;     /* kortelės fonas */
      --text:#212121;     /* pagrindinis tekstas */
      --muted:#757575;    /* antrinis tekstas */
      --accent:#007AFF;   /* akcentas / mygtukai */
      --shadow:0 10px 30px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:"Roboto","SF Pro Text","Helvetica Neue",Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.45}
    .wrap{max-width:640px;margin:0 auto;padding:20px}
    .card{background:var(--card);border:1px solid #eee;border-radius:18px;box-shadow:var(--shadow);padding:20px}

    h1{font-size:24px;font-weight:700;margin:0 0 10px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .muted{color:var(--muted)}

    select,button{font:inherit;border-radius:12px;border:1px solid #e5e5e5;padding:10px 12px;background:#fff;color:var(--text)}
    select{min-width:180px}
    button{background:var(--accent);border-color:var(--accent);color:#fff;font-weight:700}

    .section{margin-top:16px;border:1px solid #eee;border-radius:16px;padding:16px}
    .topline{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .label{font-weight:500;color:var(--muted)}
    .big{font-size:56px;font-weight:700;letter-spacing:.5px;margin:0}
    .arr{font-size:18px;color:var(--muted)}
    .badge{display:inline-block;font-size:16px;font-weight:700;border-radius:999px;padding:4px 12px;background:#EEF4FF;color:var(--accent)}

    .footer{margin-top:12px;color:var(--muted);font-size:14px}

    /* sklandus atsinaujinimas */
    .fade{opacity:0;transition:opacity .3s ease}
    .fade.show{opacity:1}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="row" style="justify-content:space-between">
        <h1>Artimiausi autobusai</h1>
        <div class="row">
          <span class="muted">Diena:</span>
          <select id="service">
            <option value="weekday">Darbo diena</option>
            <option value="weekend">Savaitgalis / šventinė</option>
          </select>
          <button id="refresh">Atnaujinti</button>
        </div>
      </div>
      <div class="muted" id="now"></div>

      <div class="section">
        <div class="topline">
          <span class="label">Artimiausias</span>
          <span class="arr" id="time1">—:—</span>
        </div>
        <p id="left1" class="big fade">—</p>
        <div class="row">
          <span class="muted">Autobusas</span>
          <span id="bus1" class="badge">—</span>
        </div>
      </div>

      <div class="section">
        <div class="topline">
          <span class="label">Kitas</span>
          <span class="arr" id="time2">—:—</span>
        </div>
        <p id="left2" class="big fade">—</p>
        <div class="row">
          <span class="muted">Autobusas</span>
          <span id="bus2" class="badge">—</span>
        </div>
      </div>

      <div class="footer">Kiškių st. • maršrutai 17 ir 39 • Europe/Vilnius</div>
    </div>
  </div>

<script>
// --- Duomenys ---------------------------------------------------------------
const DATA = {
  timezone: "Europe/Vilnius",
  routes: {
    39: {
      weekday: ["05:47","06:21","06:49","07:31","07:59","08:41","09:09","09:53","10:49","11:31","12:00","12:30","13:02","13:33","14:05","14:36","15:08","15:39","16:10","16:41","17:17","17:53","18:30","19:02","20:06","20:38","21:06","21:39","22:07","22:40","23:09","23:41","00:11"],
      weekend: ["06:49","08:00","09:09","10:14","10:46","11:22","11:55","12:31","13:07","14:10","14:30","15:16","15:49","16:23","16:58","17:33","18:09","18:44","19:17","20:53","21:53","22:53","23:53"]
    },
    17: {
      weekday: ["05:24","05:58","06:27","06:59","07:35","08:11","08:41","09:27","10:21","11:05","11:39","12:10","12:45","13:15","13:50","14:20","14:55","15:25","15:55","16:29","16:59","17:30","18:05","18:35","19:41","20:15","20:44","21:14","21:44","22:13","22:43","23:13","23:43","00:12"],
      weekend: ["06:12","07:16","08:15","09:14","10:16","10:50","11:20","11:54","12:24","13:00","13:28","14:05","15:05","15:25","16:05","16:29","17:04","17:29","18:04","18:30","19:03","20:05","21:03","22:03","23:03","00:03"]
    }
  }
};

// --- Pagalbinės -------------------------------------------------------------
const pad=n=>String(n).padStart(2,'0');
const toMin=hm=>{const [h,m]=hm.split(':').map(Number);return h*60+m};
const fromMin=min=>`${pad(Math.floor(min/60)%24)}:${pad(min%60)}`;
const nowMin=()=>{const d=new Date();return d.getHours()*60+d.getMinutes()};
const isWeekend=d=>{const x=d.getDay();return x===6||x===0};

function nextTwo(service){
  const cur = nowMin();
  const all=[];
  for(const r of Object.keys(DATA.routes)){
    DATA.routes[r][service].forEach(hm=>all.push({min:toMin(hm),hm,route:r}));
  }
  let up=all.filter(x=>x.min>=cur).sort((a,b)=>a.min-b.min);
  if(up.length<2){
    const next=all.map(x=>({min:x.min+24*60,hm:x.hm,route:x.route})).sort((a,b)=>a.min-b.min);
    up = up.concat(next);
  }
  return up.slice(0,2);
}

// --- UI ---------------------------------------------------------------------
const els={
  service:document.getElementById('service'),
  refresh:document.getElementById('refresh'),
  now:document.getElementById('now'),
  time1:document.getElementById('time1'),left1:document.getElementById('left1'),bus1:document.getElementById('bus1'),
  time2:document.getElementById('time2'),left2:document.getElementById('left2'),bus2:document.getElementById('bus2'),
};

function fadeSwap(el, text){
  el.classList.remove('show');
  el.textContent = text;
  requestAnimationFrame(()=>requestAnimationFrame(()=>el.classList.add('show')));
}

function render(){
  const fmt = new Intl.DateTimeFormat('lt-LT',{dateStyle:'medium', timeStyle:'short', timeZone:DATA.timezone});
  els.now.textContent = fmt.format(new Date());

  const svc = els.service.value;
  const [a,b]=nextTwo(svc);
  const cur = nowMin();

  function set(n, timeEl, leftEl, busEl){
    if(!n){ timeEl.textContent='—:—'; fadeSwap(leftEl,'—'); busEl.textContent='—'; return; }
    const diff = (n.min - cur + 24*60)% (24*60);
    const h=Math.floor(diff/60), m=diff%60;
    timeEl.textContent = n.hm;
    fadeSwap(leftEl, `${h?h+' val. ':''}${pad(m)} min`);
    busEl.textContent = n.route;
  }

  set(a, els.time1, els.left1, els.bus1);
  set(b, els.time2, els.left2, els.bus2);
}

function init(){
  els.service.value = isWeekend(new Date()) ? 'weekend' : 'weekday';
  els.refresh.onclick = render;
  els.service.onchange = render;
  document.querySelectorAll('.fade').forEach(el=>el.classList.add('show'));
  render();
  setInterval(render, 30*1000);
}
init();
</script>
</body>
</html>